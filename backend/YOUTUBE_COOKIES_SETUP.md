# YouTube Cookies Setup Guide

## Why Cookies Are Needed

YouTube has bot detection that blocks automated tools like yt-dlp. To bypass this, we need to authenticate using browser cookies from a logged-in YouTube session.

## How to Export YouTube Cookies

### Method 1: Using Browser Extension (Recommended)

1. **Install Cookie Extension:**
   - Chrome/Edge: Install ["Get cookies.txt LOCALLY"](https://chrome.google.com/webstore/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc)
   - Firefox: Install ["cookies.txt"](https://addons.mozilla.org/en-US/firefox/addon/cookies-txt/)

2. **Export Cookies:**
   - Open YouTube in your browser (make sure you're logged in)
   - Navigate to https://www.youtube.com
   - Click the extension icon
   - Click "Export" or "Get cookies.txt"
   - Save the file

3. **Add to Project:**
   - Rename the downloaded file to `youtube_cookies.txt`
   - Place it in the `backend/` directory
   - The file should be at: `backend/youtube_cookies.txt`

### Method 2: Using yt-dlp Command (Alternative)

If you have yt-dlp installed locally:

```bash
# Extract cookies from Chrome
yt-dlp --cookies-from-browser chrome --cookies cookies.txt "https://www.youtube.com/watch?v=dQw4w9WgXcQ"

# Or from Firefox
yt-dlp --cookies-from-browser firefox --cookies cookies.txt "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

Then upload the `cookies.txt` file to `backend/youtube_cookies.txt`

## File Format

The cookies file should be in Netscape cookie file format:

```
# Netscape HTTP Cookie File
# This file was generated by yt-dlp
.youtube.com	TRUE	/	TRUE	1234567890	cookie_name	cookie_value
...
```

## Security Notes

⚠️ **IMPORTANT**: 
- Never commit `youtube_cookies.txt` to version control
- The `.gitignore` file excludes this file automatically
- These cookies provide access to your YouTube account
- Cookies expire after some time and may need to be re-exported

## Testing

After adding the cookies file, restart the backend and test:

1. Navigate to Media Rationale page
2. Enter a YouTube URL
3. Click "Fetch Video"
4. The metadata should now be fetched successfully

## Troubleshooting

**Error: "YouTube requires authentication"**
- The cookies file is missing or in the wrong location
- Place `youtube_cookies.txt` in the `backend/` directory

**Error: "yt-dlp failed"**
- Cookies may be expired - re-export fresh cookies
- Make sure you're logged into YouTube when exporting cookies
- Try a different browser (Chrome vs Firefox)

**Still not working?**
- Verify the cookies file format (should start with `# Netscape HTTP Cookie File`)
- Check file permissions (should be readable by the application)
- Try exporting cookies again from a fresh YouTube session
